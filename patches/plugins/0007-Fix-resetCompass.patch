From 8fd8df17461409d45e44b8e67524e624d95a185b Mon Sep 17 00:00:00 2001
From: Euphyllia Bierque <bierque.euphyllia@gmail.com>
Date: Wed, 19 Feb 2025 16:36:17 +0100
Subject: [PATCH 7/8] Fix resetCompass

---
 .../java/me/pikamug/quests/player/BukkitQuester.java | 12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)

diff --git a/core/src/main/java/me/pikamug/quests/player/BukkitQuester.java b/core/src/main/java/me/pikamug/quests/player/BukkitQuester.java
index f9f7efc96..9bc4ea867 100644
--- a/core/src/main/java/me/pikamug/quests/player/BukkitQuester.java
+++ b/core/src/main/java/me/pikamug/quests/player/BukkitQuester.java
@@ -4173,11 +4173,13 @@ public class BukkitQuester implements Quester {
             return;
         }
 
-        Location defaultLocation = player.getBedSpawnLocation();
-        if (defaultLocation == null) {
-            defaultLocation = player.getWorld().getSpawnLocation();
-        }
-        player.setCompassTarget(defaultLocation);
+        player.getScheduler().run(this.plugin, scheduledTask -> {
+            Location defaultLocation = player.getRespawnLocation();
+            if (defaultLocation == null) {
+                defaultLocation = player.getWorld().getSpawnLocation();
+            }
+            player.setCompassTarget(defaultLocation);
+        }, null);
     }
 
     /**
-- 
2.48.1.windows.1

